<!--
title: Cisco MDS Implementation
description: 
published: true
date: 2025-01-28T17:30:35.529Z
tags: san, fibre channel, cisco, mds
editor: ckeditor
dateCreated: 2022-02-07T21:38:50.475Z
-->

<h1>Implementation</h1>
<ul>
  <li><a href="/cisco-mds/mds-tech-support">Procedure to collect show tech-support logs</a></li>
</ul>
<h2>MDS Cheat Sheet</h2>
<p>Enter configuration mode:</p>
<pre><code class="language-plaintext">config t</code></pre>
<p>Rename a device-alias:</p>
<pre><code class="language-plaintext">device-alias database
device-alias rename {old_name} {new_name}
device-alias commit</code></pre>
<p>Save configuration changes</p>
<pre><code class="language-plaintext">copy run start</code></pre>
<p>Displaying power usage information</p>
<pre><code class="language-plaintext">show environment power</code></pre>
<p>Configuring the Power Supply Mode</p>
<pre><code class="language-plaintext">configure terminal
power redundancy-mode {combined | insrc-redundant | ps-redundant |redundant}
(Optional) show environment power
(Optional) copy running-config startup-config</code></pre>
<p>Power Cycling Modules<br>Step 1&nbsp;<br>Identify the module that needs to be reset.</p>
<p>Step 2&nbsp;<br>Issue the reload module command to reset the identified module. This command power cycles the selected module.<br>Caution&nbsp;<br>Reloading a module disrupts traffic through the module.</p>
<pre><code class="language-plaintext">reload module 2</code></pre>
<h2>Implementation Checklist</h2>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enter configuration mode</span></label></li>
</ul>
<pre><code class="language-plaintext">config t</code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Set password to pre-defined secure password</span></label></li>
</ul>
<pre><code class="language-plaintext">username admin password &lt;new password&gt;   </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Set the switch name</span></label></li>
</ul>
<pre><code class="language-plaintext">switchname &lt;switch name&gt; </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Set IP address and subnet mask</span></label></li>
</ul>
<pre><code class="language-plaintext">int mgmt 0 ; ip address 10.0.0.10 255.255.255.0 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Set default gateway</span></label></li>
</ul>
<pre><code class="language-plaintext">ip default-gateway 10.0.0.1</code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable SSH</span></label></li>
</ul>
<pre><code class="language-plaintext">ssh key rsa 1024 force ; feature ssh </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Disable Telnet</span></label></li>
</ul>
<pre><code class="language-plaintext">no feature telnet </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable http-server</span></label></li>
</ul>
<pre><code class="language-plaintext">feature http-server </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure timezone</span></label></li>
</ul>
<pre><code class="language-plaintext">clock timezone CST -6 0 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure clock</span></label></li>
</ul>
<pre><code class="language-plaintext">clock set 15:30:00 29 September 2020 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure summertime</span></label></li>
</ul>
<pre><code class="language-plaintext">clock summer-time CDT 2 Sunday March 02:00 1 Sunday November 02:00 60 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable NPIV feature</span></label></li>
</ul>
<pre><code class="language-plaintext">feature npiv </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure NTP server</span></label></li>
</ul>
<pre><code class="language-plaintext">ntp server ntp.server.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure default switchport interface state</span></label></li>
</ul>
<pre><code class="language-plaintext">system default switchport shutdown </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure default switchport trunk mode</span></label></li>
</ul>
<pre><code class="language-plaintext">system default switchport trunk mode on </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure switchport mode</span></label></li>
</ul>
<pre><code class="language-plaintext">interface fc1/1-96 ; switchport mode auto ; exit </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure default zone policy</span></label></li>
</ul>
<pre><code class="language-plaintext">no system default zone default-zone permit </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable full zoneset distribution</span></label></li>
</ul>
<pre><code class="language-plaintext">system default zone distribute full </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Create VSAN(s)</span></label></li>
</ul>
<pre><code class="language-plaintext">vsan database ; vsan 10 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Name VSAN</span></label></li>
</ul>
<pre><code class="language-plaintext">vsan 10 name fabricA </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Assign ports to VSAN(s)</span></label></li>
</ul>
<pre><code class="language-plaintext">vsan database ; vsan 10 interface fc1/1-96 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure default zone mode (basic/enhanced)</span></label></li>
</ul>
<pre><code class="language-plaintext">zone mode enhanced vsan 10 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure zoning confirm-commit</span></label></li>
</ul>
<pre><code class="language-plaintext">zone confirm-commit enable vsan 10 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable smart zoning</span></label></li>
</ul>
<pre><code class="language-plaintext"> zone smart-zoning enable vsan 10 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure device-alias mode (basic/enhanced)</span></label></li>
</ul>
<pre><code class="language-plaintext">device-alias mode enhanced </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure device-alias confirm-commit</span></label></li>
</ul>
<pre><code class="language-plaintext">device-alias confirm-commit enable </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure domain name</span></label></li>
</ul>
<pre><code class="language-plaintext">ip domain-name lookup ; ip domain-name demo.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure DNS</span></label></li>
</ul>
<pre><code class="language-plaintext">ip name-server 1.1.1.1 2.2.2.2 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Verify licenses (POD, etc)</span></label></li>
</ul>
<pre><code class="language-plaintext">     </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure zoning</span></label></li>
</ul>
<pre><code class="language-plaintext">! Full Zone Database Section for vsan </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Import fcaliases to device-alias</span></label></li>
</ul>
<pre><code class="language-plaintext">device-alias import fcalias vsan 10 ; device-alias commit </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Update NX-OS</span></label></li>
</ul>
<pre><code class="language-plaintext">     </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure static domain-id</span></label></li>
</ul>
<pre><code class="language-plaintext">fcdomain domain 11 static vsan 10 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure contact name</span></label></li>
</ul>
<pre><code class="language-plaintext">snmp-server contact John Doe </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure contact email address</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; email-contact johndoe@demo.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure contact phone</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; phone-contact +1-123-456-7890 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure contact street address</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; streetaddress 123 North Street, DemoVille, MN 55555 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Configure site-id</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; site-id Site1 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Call home distribute</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; distribute </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Call home destination profile</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; destination-profile full-txt-destination email-addr DemoTeam@demo.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Email From</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; transport email from DemoTeam@demo.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Email Reply To</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; transport email reply-to switch1@demo.com </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">SMTP Server</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; transport email smtp-server smtprelay.demo.com port 25 </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Enable call home</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; enable </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Commit call home</span></label></li>
</ul>
<pre><code class="language-plaintext">callhome ; commit </code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Label the switch ports</span></label></li>
</ul>
<pre><code class="language-plaintext">interface fc1/1
switchport description &lt;port label&gt;</code></pre>
<ul class="todo-list">
  <li><label class="todo-list__label"><input type="checkbox" disabled="disabled"><span class="todo-list__label__description">Copy run start</span></label></li>
</ul>
<pre><code class="language-plaintext">copy run start </code></pre>
<h2>Port Channel Configuration</h2>
<blockquote>
  <p>Ensure one or more ISL exists between the two switches. Make sure they come up as “TE” ports with the correct VSANs. ISLs can be in VSAN 1 or just in the VSAN that needs to be extended between two switches.</p>
</blockquote>
<h3>Create a Port Channel</h3>
<pre><code class="language-plaintext">interface port-channel 3
channel mode active</code></pre>
<h3>Add Ports to a Port Channel</h3>
<pre><code class="language-plaintext">interface fc1/1-2
channel-group 3 force</code></pre>
<h3>Activate a Port Channel</h3>
<pre><code class="language-plaintext">interface port-channel 3
no shut</code></pre>
<h3>Delete a Port channel</h3>
<pre><code class="language-plaintext">no interface port-channel 3</code></pre>
<h1>Misc Information</h1>
<h2>Power Supply Modes</h2>
<p>Cisco MDS 9000 Series Multilayer Switches support different number and capabilities of power supplies. This section describes the power modes that are available on Cisco MDS 9000 Series Multilayer Switches.</p>
<p>Cisco MDS 9710 Multilayer Switches can support up to four power supplies when they have only Cisco MDS 9700 48-Port 32-Gbps Fibre Channel Switching Modules installed on them. By default, the four power supplies are installed in the power supply bays 1 to 4.</p>
<p>You can configure one of the following power modes to use the combined power provided by the installed power supply units (no power redundancy) or to provide power redundancy when there is power loss. We recommend that you configure the full redundancy power mode on your switch for optimal performance.</p>
<p><strong>Combined mode</strong>—This mode uses the combined capacity of all the power supplies. In case of power supply failure, the entire switch can be shut down (depending on the power used) causing traffic disruption. This mode is seldom used, except in cases when the switch requires more power.</p>
<p><strong>Input Source (grid) redundancy mode</strong>—This mode allocates half of the power supplies to the available category and the other half to the reserve category. You must use different power supplies for the available and reserve categories so that if the power supplies used for the active power fails, the power supplies used for the reserve power can provide power to the switch. If the grid-redundancy mode is lost, the power mode reverts to combined mode.</p>
<p><strong>Power-supply (N+1) redundancy mode</strong>—This mode allocates one power supply as reserve to provide power to the switch in case an active power supply fails. The remaining power supplies are allocated for the available category. The reserve power supply must be at least as powerful as each of the power supplies used for the active power.</p>
<p><strong>Full-redundancy mode</strong>—This mode is a combination of input-source (grid) and power-supply (N+1) redundancy modes. Similar to the input-source redundancy mode, this mode allocates half of the power supplies to the available category and the remaining power supplies to reserve category. One of the reserve power supplies can alternatively be used to provide power if a power supply used for the active power fails.</p>
<p>For more information on the power supply modes supported on your switch, see the Hardware Installation Guide corresponding to your switch.</p>
